📩 メール（メッセージ）機能 システム仕様書

■ 概要
本機能は、ユーザー同士がアプリ内でメッセージの送受信を行うための専用機能である。
ログイン機能・投稿機能・出品機能・決済機能など、他の既存機能には一切影響を与えない独立機能として実装すること。

■ 機能の目的
・ユーザー同士が安全に連絡を取れるようにする
・外部のメールアドレスは使用しない
・アプリ内だけで完結するメッセージ機能とする

■ メール機能の構成
① 送信ボタン設置場所
・各ユーザーのプロフィールページに「メッセージを送る」ボタンを表示する
・自分のプロフィールには表示しない
・ログインしていない場合は表示しない

② メッセージ送信画面
表示項目：
・宛先ユーザー名（自動表示・変更不可）
・メッセージ入力欄（テキストのみ）
・送信ボタン

送信時の動作：
・送信者ID
・受信者ID
・メッセージ内容
・送信日時
をデータベースへ保存

③ 受信機能（メールボックス）
マイページ内に📥「メッセージ一覧」ページを作成

表示内容：
・送信者ユーザー名
・メッセージの最初の数文字
・受信日時
・未読／既読の状態
・タップすると詳細画面へ遷移

④ メッセージ詳細画面
表示内容：
・送信者名
・受信日時
・メッセージ本文

既読処理：
・開いた時点で「既読」に変更

⑤ 返信機能
・詳細画面に「返信する」ボタンを設置
・同じ相手へのメッセージ入力画面を開く

⑥ 通知機能
新着メッセージが届いた場合：
・アプリ内通知バッジ表示
・プッシュ通知（可能であれば）

■ セキュリティ仕様
・メッセージは送信者と受信者のみ閲覧可能
・他ユーザーや管理者は内容を閲覧不可（管理上必要な場合を除く）
・ログインユーザーのみ送受信可能

本仕様はメール機能のみの追加説明であり、
既存機能の修正・削除・統合は絶対行わないこと。
